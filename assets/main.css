:root {
  /* Colors */
  --text-color: #8d8d8d;
  --text-color-light: #d2d2d2;
  --text-color-dark: #474747;

  --primary-color: #ff0037;

  --C1: #ff0037;
  --C2: #00ffb9;
  --C3: #e100ff;

  --g1: #620075;
  --g2: #4a2b80;
  --g3: #35518a;
  --g4: #1b8097;
  --g5: #00b0a4;

  --g6: #eb77fb;
  --g7: #d8fcf2;
  --g8: #fb6082;

  --background-color: #0d0010; /* #000000; */
  --pixel-color: #200008dc; /* #6200755e; /* #200008dc; /* #130f19; /* #270009dc; /* #1f1f1f;  */

  --spotlight-color: #41296e90; /* #41296e48; /* #35518a1d; /* #41296e48; */

  /* Fonts */
  --font-main: monospace, "Courier New", Roboto, sans-serif;

  --font-secondary: "Courier New", monospace, Roboto, sans-serif;

  /* Spacing */
  --xxs: 0.125rem;
  --xs: 0.25rem;
  --sm: 0.5rem;
  --md: 1rem;
  --lg: 2rem;
  --xl: 4rem;
  --xxl: 8rem;

  /* Borders and shadows */
  /* ! TODO: create border and shadow colors instead of full box/text-shadow */

  /* Page */
  --page-max-width: 1919px;
  --page-width: min(100dvw, var(--page-max-width));
  --page-padding: var(--md);

  /* Animation */
  --timing-function1: cubic-bezier(0.19, 1, 0.22, 1); /* Popup */
  --timing-function2: cubic-bezier(0.34, 1.1, 0.64, 1); /* Dramatic pause */
  --timing-function3: cubic-bezier(0.57, 0.4, 0.5, 1.4); /* Bounce */
}

/* 
 * CUSTOM PROPERTIES
 */

@property --offset1 {
  syntax: "<percentage>";
  initial-value: -2%;
  inherits: false;
}

@property --offset2 {
  syntax: "<percentage>";
  initial-value: -2%;
  inherits: false;
}

@property --offset3 {
  syntax: "<percentage>";
  initial-value: -2%;
  inherits: false;
}

/*
 * UTILITY CLASSES 
 */

.no-transitions * {
  transition: none !important;
  animation: none !important;
}

/* Prevent any animations until ready */
.preload * {
  animation-duration: 0s !important;
  animation-delay: 0s !important;
  transition-duration: 0s !important;
  visibility: hidden !important;
}

.flex {
  display: flex;
}

.flex-center-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-col-center-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.flex-col-center-between {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
}

.flex-col-start-between {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: space-between;
}

.flex-col-end {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: flex-end;
}

.showUp {
  animation-name: showUp;
  animation-duration: 4s;
  animation-delay: 2s;
  animation-timing-function: var(--timing-function1);
  animation-fill-mode: both;
}

.spinUp {
  animation-name: spinUp, showUp;
}

.fastFadeIn {
  animation-name: showUp;
  animation-duration: 0.75s;
  animation-delay: 0.25s;
  animation-timing-function: var(--timing-function1);
  animation-fill-mode: both;
}

.slowFadeIn {
  animation-name: showUp;
  animation-duration: 0.75s;
  animation-delay: 9.35s;
  animation-timing-function: var(--timing-function1);
  animation-fill-mode: both;
}

.fadeOut {
  animation-name: showUp;
  animation-direction: reverse;
  animation-duration: 0.75s;
  animation-delay: 9.35s;
  animation-timing-function: var(--timing-function1);
  animation-fill-mode: both;
}

/* 
 * ELEMENT STYLES 
 */

html {
  overflow-x: hidden;

  height: 100dvh;
  width: 100dvw;

  display: flex;
  justify-content: center;
  align-items: center;

  background-color: black;

  /* ! DEBUGGING 
  background-color: red; */
}

body {
  position: relative;

  font-family: var(--font-main);
  color: var(--text-color);
  /*background-color: var(--background-color);*/
  overflow: hidden !important;
  letter-spacing: var(--xxs);

  z-index: 0;

  /* Perspective settings */
  perspective: 2000px;
  perspective-origin: center center;
  transform-style: preserve-3d;

  /* ! DEBUGGING 
  background-color: greenyellow !important;
  border: 2px solid blue; */
}

body::before,
body::after,
#ambient-light {
  content: "";
  display: block;
  position: absolute;
  inset: 0;
}

/* Spotlight effect */
body::before {
  background-image: conic-gradient(
      transparent 0% 30%,
      var(--spotlight-color) 49% 51%,
      transparent 70% 100%
    ),
    radial-gradient(ellipse 30% 18% at center 110%, #35518add, transparent),
    radial-gradient(ellipse 150% 18% at center 110%, #4a2b80d6, transparent);

  /*conic-gradient(
      transparent 0% 20%,
      var(--spotlight-color) 49% 51%,
      transparent 80% 100%
    ),
  */

  top: 0;
  bottom: unset;
  height: 102%; /* 2% counteracts the black border caused by blur */
  background-size: 100% 225%;
  background-repeat: no-repeat;
  background-position: center 95%;

  filter: blur(8px);
  z-index: -99;

  /* Animation */
  opacity: 0;
  animation-name: lightUp, dim, lightCycle;
  animation-duration: 4s, 2s, 24s;
  animation-delay: 1.5s, 8s, 12s;
  animation-timing-function: var(--timing-function2);
  animation-fill-mode: both, forwards, forwards;
  animation-iteration-count: 1, 1, infinite;

  /* !DEBUGGING 
  display: none; */
}

/* Pixel effect */
body::after {
  --pixel: max(var(--xs), 3px);

  background-color: transparent;
  background-image: conic-gradient(
    var(--pixel-color) 0% 25%,
    transparent 25% 100%
  );
  background-size: var(--pixel) var(--pixel);
  margin-left: calc(var(--pixel) * -0.25);
  margin-top: calc(var(--pixel) * 0.25);
  z-index: -1;

  /* !DEBUGGING 
  display: none; */
}

nav {
  overflow: hidden;
}

nav a {
  text-transform: uppercase;
  position: relative;
  font-size: 0.8rem;
  font-weight: bold;
}

h1 {
  color: var(--text-color-dark);
  font-size: 1.5rem;
  font-weight: normal;
  line-height: 0.95em;
  text-transform: uppercase;
}

a {
  color: var(--text-color);
  text-decoration: none;
  transition: color 0.6s var(--timing-function1);
  pointer-events: auto;
}

a:visited {
  color: var(--text-color);
}

a:hover,
a:active {
  color: var(--text-color-light);
}

a:visited:hover {
  color: var(--text-color-light);
}

li {
  list-style: none;
}

img {
  max-width: 100%;
  height: auto; /* auto */
  object-fit: contain;

  /* ! DEBUGGING 
  background-color: rgba(255, 255, 255, 0.468); */
}

footer {
  color: var(--text-color-dark);
  font-style: italic;
  font-size: 0.8rem;

  /*align-items: flex-end; 
  gap: var(--md);
  background-color: red; */
}

/*
 * Ambient light effect
 */

#ambient-light {
  --ambient-light: #ff003739;
  top: 0;
  bottom: unset;
  height: 100%;

  background-size: 100% 220%;
  background-repeat: no-repeat;
  background-position: center 95%;

  background-image: radial-gradient(
      ellipse 135% 18% at 130% 110%,
      var(--ambient-light),
      transparent
    ),
    radial-gradient(
      ellipse 135% 18% at -30% 110%,
      var(--ambient-light),
      transparent
    );

  filter: blur(24px);
  z-index: -99;
}

/*
 * PAGE LAYOUT
 */

#page-container {
  margin: 0 auto;
  min-height: 100%;
  height: 100%;

  padding: var(--page-padding);

  z-index: 1;

  /* ! DEBUGGING
  background-color: rgba(255, 0, 0, 0.418); */
}

#carousel {
  z-index: 2;
}

#navbar,
#title-container,
#footer {
  z-index: 3;
}

#info {
  z-index: 4;
}

#page-container.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: auto auto 1fr auto;
  grid-template-areas:
    "title title . ."
    "navbar . . info"
    "carousel carousel carousel carousel"
    "footer footer footer footer";

  gap: var(--xs);

  height: 100%;

  /* ! DEBUGGING 
  background-color: blue; */
}

#navbar {
  grid-area: navbar;

  /* ! DEBUGGING 
  background-color: yellow; */
}

#title-container {
  grid-area: title;

  /* ! DEBUGGING
  background-color: yellow; */
}

#info {
  grid-area: info;

  /* ! DEBUGGING 
  background-color: yellow; */
}

#carousel {
  grid-area: carousel;

  /* ! DEBUGGING
  background-color: rgb(255, 255, 0); */
}

#footer {
  grid-area: footer;

  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-areas: "contact . . social";

  gap: var(--xs);

  height: 100%;

  /* ! DEBUGGING
  background-color: purple;  */
}

#contact {
  grid-area: contact;
}

#social-icons {
  grid-area: social;

  /*
  background-color: yellow; */
}

@media screen and (orientation: portrait) {
  #page-container.grid {
    grid-template-columns: repeat(2, 1fr);
    grid-template-areas:
      "title title"
      "navbar info"
      "carousel carousel"
      "footer footer";
  }

  #footer {
    grid-template-columns: repeat(2, 1fr);
    grid-template-areas: "contact social";
  }
}

@media screen and (max-width: 743px) and (orientation: portrait) {
  /* --------- Small devices ------------ */
  #page-container.grid {
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: auto auto auto 1fr auto;
    grid-template-areas:
      "title"
      "info"
      "navbar"
      "carousel"
      "footer";
  }

  #title-container,
  #info {
    margin: var(--md) 0;
  }

  #footer {
    display: flex;
    justify-content: space-between;
  }
}

@media screen and (max-height: 743px) and (orientation: landscape) {
  /* --------- Small devices ------------ */
  #page-container.grid {
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: auto auto 1fr;
    grid-template-areas:
      "navbar title title title"
      "navbar info info info"
      "carousel carousel carousel carousel";
  }

  #footer {
    grid-template-columns: repeat(4, 1fr);
    grid-template-areas: ". contact social social";

    position: absolute;
    left: var(--page-padding);
    right: var(--page-padding);
    bottom: var(--page-padding);

    height: fit-content !important;

    /* ! DEBUGGING 
    background-color: blue !important;
    opacity: 0.5; */
  }

  #social-icons {
    justify-self: end;
  }
}

/* 
 * SECTION STYLES
 */

/* NAVBAR */

#navbar {
  width: 100%;
}

#navbar ul {
  gap: var(--xxs);
}

#navbar .nav-link {
  width: fit-content;

  position: relative;

  /* Slower transition when returning (hover-out) */
  transition: transform 1.75s var(--timing-function1);

  /* ! DEBUGGING 
  background-color: purple; */
}

#navbar .nav-link.pushed {
  transition: transform 1.25s var(--timing-function1);

  transform: translateX(1.1em);
}

#navbar .nav-link:hover {
  /* Faster transition when hovering (hover-in) */
  transition: transform 1.25s var(--timing-function1);

  transform: translateX(1.1em);
}

#navbar .arrow-right {
  color: transparent;
  background-image: linear-gradient(to right, #eb77fb -50%, #00ffb9 250%);
  background-clip: text;

  margin-right: var(--sm);
  position: absolute;
  left: -1.35em;
  font-size: 1.1em;

  transform: translateX(-0.5em);
  transition: transform 0.5s var(--timing-function3);
}

#navbar .nav-link:hover .arrow-right {
  transform: translateX(0.25rem);
}

/* TITLE */

#title-container {
  gap: var(--lg);
  margin-bottom: var(--md);
}

#title-container,
#navbar {
  letter-spacing: var(--xs);
}

/* INFO STYLES @ /assets/text-scramble/styles.css */
#info {
  color: var(--text-color);

  height: 100%;
  position: relative;
  overflow: visible;
  pointer-events: none;

  /* DEBUGGING 
  background-color: red; */

  /*padding: 1rem;*/
}

#info::before {
  /* Create a placeholder that reserves space in the grid layout */
  content: attr(data-target-text);
  /* Use the target text content only to reserve space */
  visibility: hidden;
  display: block;

  /* ! DEBUGGING 
  background-color: blue; */
}

/* ! DEBUGGING 
#info p {
  background-color: rgba(255, 0, 0, 0.436);
} */

/* CAROUSEL STYLES @ /assets/carousel/styles.css */

#carousel {
  align-self: end;

  width: 100%;
  height: 100%;

  /* ! DEBUGGING */
}

/*
 * CHART
 */

#chart-section {
  --svg-ratio: 1.6;

  --snap-threshold: 0.3; /* When to trigger snap */

  --snapping-to-duration: 1.25s;
  --snapping-from-duration: 0.6s;

  /* Chart is full-screen height in landscape orientation */
  --chart-height: calc(80dvh - 2 * var(--page-padding));
  --chart-width: calc(var(--chart-height) * var(--svg-ratio));

  --border-width: 0.325rem;
}

@media (max-aspect-ratio: 1.6) {
  #chart-section {
    /* Chart is full-screen width in portrait orientation */
    --chart-width: calc(80dvw - 2 * var(--page-padding));
    --chart-height: calc(var(--chart-width) / var(--svg-ratio));
  }
}

#chart-section.chart-viewport {
  position: fixed;
  top: 50%;
  left: 50%;

  /* ! hight and width must have same viewport faction 
   since media query aspect ratio is based on viewport dimensions  */
  width: 75%;
  height: 75%;

  /* ! TOP LEFT instead of center center works lol!*/
  transform-origin: top left !important;
  transform: translate(-50%, -50%) scale(1, 1);

  transition: all var(--snapping-from-duration) var(--timing-function1);

  z-index: 1000;
  pointer-events: none; /* ! Inherited property */

  box-shadow: 5px 5px 30px 10px #9eeafb27;

  /* ! BUILDING
   ! "activate" element on hover 
  Hidden by default 
  opacity: 0;
  visibility: hidden;
  
  /* Smooth transitions */ /*
  transition:
    opacity 0.6s var(--timing-function2),
    visibility 0.6s var(--timing-function2);
    */

  /* ! DEBUGGING 
  background-color: greenyellow; */
}

/* Border effect */
#chart-section::before {
  /* Line settings */
  --line-thin: var(--border-width);
  --line-c: white; /* #9eeafb; */
  --line-step1: 0%;
  --line-step2: calc(var(--line-step1) + var(--line-thin));
  --line-step3: calc(100% - var(--line-thin));
  --line-step4: 100%;

  --mask: radial-gradient(circle at center, black 50%, transparent 150%);
  --mask-line: conic-gradient(
    from 65deg,
    rgba(0, 0, 0, 0) var(--offset3),
    rgba(0, 0, 0, 1) var(--offset2),
    rgba(0, 0, 0, 0) var(--offset1)
  );

  content: "";
  position: absolute;
  inset: calc(var(--line-thin) * -1);
  z-index: -2;

  background-image: repeating-linear-gradient(
      to bottom,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    ),
    repeating-linear-gradient(
      to right,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    );

  mask-image: var(--mask), var(--mask-line);
  -webkit-mask-image: var(--mask), var(--mask-line);

  mask-composite: intersect;
  -webkit-mask-composite: intersect;

  border-radius: var(--sm);

  /* Animation settings */
  animation-name: spinLine;
  animation-duration: 24s;
  animation-timing-function: linear;
  animation-fill-mode: both;
  animation-iteration-count: infinite;

  /* DEBUGGING STYLE 
  display: none; */
}

/* Border effect */
#chart-section::after {
  /* Line settings */
  --line-thin: 0.25rem; /* 0.0625rem; /* 1px at rem 16px*/
  --line-c: #9eeafb; /* #eb77fb; /* #9eeafb; */
  --line-step1: 0%;
  --line-step2: calc(var(--line-step1) + var(--line-thin));
  --line-step3: calc(100% - var(--line-thin));
  --line-step4: 100%;

  --mask: radial-gradient(circle at center, black 50%, transparent 150%);

  content: "";
  position: absolute;
  inset: calc(var(--line-thin) * -1);
  z-index: -3;

  background-image: repeating-linear-gradient(
      to bottom,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    ),
    repeating-linear-gradient(
      to right,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    );

  mask-image: var(--mask);
  -webkit-mask-image: var(--mask);

  mask-composite: intersect;
  -webkit-mask-composite: intersect;

  border-radius: var(--sm);

  /* DEBUGGING STYLE 
  display: none; */
}

/* CHART SNAPPING */
#chart-section.chart-viewport.snapped {
  pointer-events: initial;

  width: calc(100% - var(--border-width) * 2);
  height: calc(100% - var(--border-width) * 2);

  background-image: linear-gradient(to bottom, #35518a, #fb6081a8 200%);

  transition: all var(--snapping-to-duration) var(--timing-function1);

  backdrop-filter: blur(12px) grayscale(50%);
}

/* ! EDITING  */
/* ! TODO: BUG to fix */

#chart-navbar {
  position: absolute;
  top: 0;
  bottom: 0;
  left: var(--page-padding);

  width: fit-content;
  overflow: visible;

  z-index: 6;

  transform: translateX(calc(-100% - var(--page-padding)));
  /* Slower transition when returning (hover-out) */
  transition: transform 2s var(--timing-function1);

  /* ! DEBUGGING 
  background-color: red; */
}

#chart-navbar::before {
  /* Increase hovering area */
  content: "";
  display: block;
  position: absolute;
  top: 0;
  bottom: 0;
  left: -1rem;
  right: -1.25rem;

  z-index: -1;
  cursor: pointer;

  /* Screen effect */
  /*  #230008a4 */
  background-color: #23000865;

  box-shadow:
    /* Outer shadow */
    3px 5px 10px 2px #230008c2,
    /* top/left */ inset 1px 1px 1px #5e848d,
    /* all around */ inset 0 0 7px 2px #23000886,
    /* bottom/right */ inset -1px -1px 1px #35518a;

  border: 1px solid black;
  backdrop-filter: grayscale(30%) contrast(1.1) blur(1.5px);

  /* ! DEBUGGING: 
  background-color: rgba(255, 255, 0, 0.355); */
}

#chart-navbar:hover {
  /* Faster transition when hovering (hover-in) */
  transition: transform 1.25s var(--timing-function1);
  transform: translate(0) !important;
}

#chart-navbar ul {
  position: relative;
  align-items: flex-end;
  /* ! DEBUGGING:
  background-color: rgba(255, 255, 0, 0.456); */
}

#chart-navbar .arrow-right {
  left: unset;
  right: -2em;

  /* ! DEBUGGING  
  background-color: blue; */
}

#chart-navbar .nav-link:hover .arrow-right {
  transform: translateX(0);
}

/* ! EDITING *******************************/

#chart-modal {
  width: 100%;
  height: 100%;

  /* Reset browser presets */
  max-width: initial;
  max-height: initial;

  border: none;
  outline: none;
  background-color: initial;

  /*  ! DEBUGGING  
  background-color: red; */
}

/* ! DEBUGGING 
#chart-modal:modal {
 
}*/

#chart-modal-content {
  width: inherit;
  height: inherit;

  display: grid;
  grid-template-columns: auto 1fr auto;
  grid-template-rows: 1fr;
  grid-template-areas: "title chart footer";

  row-gap: var(--md);
  column-gap: var(--lg);

  padding: var(--page-padding);

  /* ! DEBUGGING 
  background-color: rgb(128, 0, 128);
  border: 1px solid black; */
}

#chart-section.snapped #chart-modal-content {
  padding: var(--page-padding) calc(2 * var(--page-padding));
}

#chart-title-container {
  grid-area: "title";
}

#chart-container {
  grid-area: "chart";
}

#chart-footer {
  grid-area: "footer";
}

/* TEXT ORIENTATION: vertical when chart is full screen height 
  - landscape viewport */
#chart-title,
#chart-title-description,
#chart-footer {
  writing-mode: sideways-lr;
}

#chart-title-container {
  flex: 1;
  min-width: 0;
  min-height: 0;

  /* ! EXPERIMENTING 
  max-height: 83%;
  align-self: end; */

  gap: var(--sm);

  /* ! DEBUGGING 
  display: none; 
  background-color: red; */
}

#chart-title,
#chart-title-description {
  text-align: center;
  text-wrap: balance;
  /* ! DEBUGGING 
  background-color: yellow;
  color: black; */
}

#chart-title,
#chart-footer {
  color: var(--text-color);
}

#chart-title-description,
#chart-footer a {
  color: var(--text-color-light);
}

#chart-footer a:hover {
  color: white;
}

#chart-title-container,
#chart-footer {
  height: 100%;
  z-index: 2;
  pointer-events: none;

  /* ! DEBUGGING  
  background-color: red; */
}

#chart-footer .footer-section {
  /* ! DEBUGGING  
  background-color: yellow; */
}

/* TEXT ORIENTATION: horizontal when chart is full screen width
  - portrait viewport */
@media (max-aspect-ratio: 1.6) {
  #chart-modal-content {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr auto;
    grid-template-areas:
      "title"
      "chart"
      "footer";
  }

  #chart-title-container {
    flex-direction: column;
  }

  #chart-title,
  #chart-title-description,
  #chart-footer {
    writing-mode: unset;
    text-orientation: unset;
  }

  #chart-title-container,
  #chart-footer {
    width: 100%;
    height: initial;
  }

  #chart-container {
    /* ! DEBUGGING 
    background-color: blue; */
  }
}

#chart-container {
  /* ! DEBUGGING 
  background-color: red; */
}

#chart {
  width: var(--chart-width);
  height: var(--chart-height);
  /* ! DEBUGGING 
  background-color: deeppink; */
}

#legend {
  z-index: 2;
  pointer-events: none;

  /* ! DEBUGGING */
  background-color: red;
  width: 16rem; /* ! TODO: REMOVE THIS AFTER DEBUGGING ! */
  height: 0.75rem; /* ! TODO: REMOVE THIS AFTER DEBUGGING ! */

  display: none;
}

#legend-svg {
  --padding: 14px;
  --length: 250px;

  width: calc(var(--length) + var(--padding) * 2);
  height: calc(8px + var(--padding) * 1.5);
}

.tick {
  font-size: 0.7rem;
}

#tooltip {
  --theme1: #cfc2e3;
  --theme2: #fa3560;
  --padding: calc(1rem * 1.65);

  position: absolute;

  top: -1000px;
  left: -1000px;
  visibility: hidden;

  width: calc(1rem * 25);
  height: calc(1rem * 25);
  padding: 1.5rem;

  color: var(--text-color);
  font-size: 0.65rem;
  line-height: 1.3;

  overflow: visible;
  z-index: 2;

  border-radius: var(--xs);

  /* ! DEBUGGING
  display: none;
  background-color: red; 
  visibility: visible;
  top: 20%;
  left: 20%;
  */
}

/* Reflex effect */
#tooltip::before {
  --padding: 0.5px;
  --line-thin: 1px;
  --line-c: white; /* originally set to: #494949 */
  --line-step1: var(--padding);
  --line-step2: calc(var(--line-step1) + var(--line-thin));
  --line-step3: calc(100% - var(--line-thin) - var(--line-step1));
  --line-step4: calc(var(--line-step3) + var(--line-thin));

  --offset1: 0%;
  --offset2: 0%;
  --offset3: 0%;

  --mask: radial-gradient(circle at center, black 50%, transparent 100%);
  --mask-line: conic-gradient(
    from 45deg,
    rgba(0, 0, 0, 0) var(--offset3),
    rgba(0, 0, 0, 1) var(--offset2),
    rgba(0, 0, 0, 0) var(--offset1)
  );

  /* Animation settings 
  animation-name: spinLine;
  animation-duration: 24s;
  animation-timing-function: linear;
  animation-fill-mode: both;
  animation-iteration-count: infinite;
  */

  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;

  background-image: repeating-linear-gradient(
      to bottom,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    ),
    repeating-linear-gradient(
      to right,
      transparent 0%,
      transparent var(--line-step1),
      var(--line-c) var(--line-step1),
      var(--line-c) var(--line-step2),
      transparent var(--line-step2),
      transparent var(--line-step3),
      var(--line-c) var(--line-step3),
      var(--line-c) var(--line-step4),
      transparent var(--line-step4),
      transparent 100%
    );

  mask-image: var(--mask), var(--mask-line);
  -webkit-mask-image: var(--mask), var(--mask-line);

  mask-composite: intersect;
  -webkit-mask-composite: intersect;

  /* ! DEBUGGING STYLE 
  display: none; */
}

/* Screen effect */
.screen {
  /*  #230008a4 */
  /*
  box-shadow: 5px 5px 30px 10px #9eeafb27;
  #9eeafb
  */

  background-color: rgba(0, 0, 0, 0.431); /* #2300088a; */

  box-shadow:
    /* Outer shadow */
    3px 5px 30px 10px rgba(0, 0, 0, 0.474),
    /* Dark inner shadow at the top/left */ inset 1px 1px 1px #9eeafb92,
    /* Subtle inner shadow all around */ inset 0 0 8px 2px rgba(0, 0, 0, 0.556),
    /* Light inner highlight at bottom/right to simulate reflection */ inset -1px -1px
      1px #ec77fb8c;

  border: 1px solid #9eeafb1f;

  backdrop-filter: grayscale(30%) contrast(1.1);
}

#tooltip-content {
  position: relative;

  width: 100%;
  height: 100%;

  display: flex;
  flex-direction: column;
  gap: 1rem;

  /* ! DEBUGGING STYLES  
  background-color: yellow; */
}

#tooltip-title,
#tooltip .current-county {
  color: var(--text-color-light);
  font-size: 1.5rem;

  text-align: center;
}

#data-container {
  width: 100%;
  flex: 1;

  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 1rem;

  /* ! DEBUGGIG 
  background-color: greenyellow; */
}

#tooltip .data-max,
#tooltip .data-min {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
}

#tooltip .data {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.25rem;
}

#tooltip .current-county .data-value {
  font-size: 3.5rem;
}

#tooltip .data:not(.current-county) {
  --b-max: 0.5px solid #9eeafb92;
  --b-min: 0.5px solid #ec77fb8c;

  padding: 0.25rem 0;
}

#tooltip .data-max .data {
  border-top: var(--b-max);
  border-bottom: var(--b-max);
}

#tooltip .data-min .data {
  border-top: var(--b-min);
  border-bottom: var(--b-min);
}

#tooltip-footer {
  font-style: italic;
}

#county-minimap {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;

  z-index: -2;
}

#county-minimap svg {
  width: 100%;
  height: 100%;
}

#county-minimap path {
  stroke-width: 0.5px;
  fill: none;
  stroke: var(--theme1);
  stroke-width: 0.1px;

  --offset1: 0%;
  --offset2: 0%;
  --offset3: 0%;

  --mask: radial-gradient(circle at center, black 50%, transparent 100%);
  --mask-line: conic-gradient(
    from 45deg,
    rgba(0, 0, 0, 0) var(--offset3),
    rgb(0, 0, 0) var(--offset2),
    rgba(0, 0, 0, 0) var(--offset1)
  );

  mask-image: var(--mask-line);
  -webkit-mask-image: var(--mask-line);

  mask-composite: intersect;
  -webkit-mask-composite: intersect;

  /* Animation settings */
  animation-name: spinLine;
  animation-duration: 12s;
  animation-delay: 0s;
  animation-timing-function: ease-in-out;
  animation-fill-mode: both;
  animation-iteration-count: infinite;
}

#tooltip-footer {
  justify-self: flex-end;
}

/*
 * FOOTER STYLES
 */

/* ! DEBUGGING
#social-icons {
  background-color: red; 
}
*/

/* ! DEBUGGING
#social-icons .social-icon {
  background-color: purple;
}
  */

footer .footer-section {
  display: flex;
  flex-direction: row !important;
  align-items: flex-start;
  justify-content: flex-start;

  gap: var(--xs);
  flex-wrap: wrap;
  /* Required for wrapped items' alignment */
  align-content: flex-start;

  /* ! DEBUGGING 
  background-color: yellow; */
}

footer .footer-section span {
  display: block;
  width: fit-content;
  height: fit-content;

  /* ! DEBUGGING 
  background-color: greenyellow; */
}

footer .social-icon {
  flex: 1;
  width: 100%;
  display: flex;
}

footer .social-icon a {
  display: flex;
  align-items: center;
  gap: var(--sm);
}

footer .social-icon svg {
  fill: currentColor;

  width: 1rem;
  height: 1rem;

  /* ! DEBUGGING 
  background-color: blue; */
}

footer #contact {
  transition: color var(--time) var(--timing-function1);

  margin-right: auto;

  /* ! DEBUGGING 
  background-color: yellow; */
}

#chart-page header,
#chart-page footer {
  height: var(--chart-height);

  /* ! DEBUGGING 
  background-color: red; */

  /*display: none;*/
}

#chart-page footer #contact {
  margin-top: auto;

  /* ! DEBUGGING 
  background-color: #00ffc8; */
}

/* 
 * ANIMATIONS 
 */

@keyframes lightUp {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.8;
  }
}

@keyframes dim {
  from {
    opacity: 0.8;
  }
  to {
    opacity: 0.5;
  }
}

@keyframes lightCycle {
  0% {
    opacity: 0.5;
  }
  85% {
    opacity: 0.8;
  }
  100% {
    opacity: 0.5;
  }
}

@keyframes showUp {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes spinUp {
  from {
    transform: translate(var(--xl), var(--xl));
  }
  to {
    /* unset - instead of translate(0);
     apparently this has fixed the jump at first page load */
    transform: unset;
  }
}

@keyframes spinLine {
  0% {
    --offset1: 0%;
    --offset2: -25%;
    --offset3: -50%;
  }
  35% {
    --offset2: 35%;
    --offset3: 0%;
  }
  50% {
    --offset1: 80%;
    --offset2: 75%;
    --offset3: 65%;
  }
  100% {
    --offset1: 150%;
    --offset2: 125%;
    --offset3: 100%;
  }
}
